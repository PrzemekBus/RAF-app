create table ras_reviews (
  rev_id           number        generated by default as identity primary key,
  rev_dev_id       number        not null, 
  rev_u_id         number        not null, 
  rev_rating       number(1)     not null, 
  rev_comment      clob, 
  rev_date         date          default sysdate, 
  rev_created      date          not null default sysdate,
  rev_created_by   varchar2(255) not null default user,
  rev_updated_by   varchar2(255),
  rev_updated      date,
  constraint fk_review_device foreign key (rev_dev_id) references ras_devices(dev_id) on delete cascade,
  constraint fk_review_user foreign key (rev_u_id) references ras_users(u_id) on delete cascade
);


comment on table ras_reviews is 'table storing reviews for devices';
comment on column ras_reviews.rev_id is 'unique identifier for the review';
comment on column ras_reviews.rev_dev_id is 'identifier of the reviewed device';
comment on column ras_reviews.rev_u_id is 'identifier of the user who wrote the review';
comment on column ras_reviews.rev_rating is 'rating given to the device (e.g., 1 to 5)';
comment on column ras_reviews.rev_comment is 'text of the review';
comment on column ras_reviews.rev_date is 'date when the review was written';


create index idx_reviews_dev_id on ras_reviews(rev_dev_id);
create index idx_reviews_u_id on ras_reviews(rev_u_id);
create index idx_reviews_rating on ras_reviews(rev_rating);
